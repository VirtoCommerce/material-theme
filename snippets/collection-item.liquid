{% capture collection_title %}{{ collection.title | escape }}{% endcapture %}
<div class="collection-wrap">
  <div class="collection-image">
    <a href="{{ collection.url | absolute_url }}">
      {% if collection.image %}
      <img src="{{ collection.primary_image.url | img_url }}" alt="{{ collection_title }}" />
      {% else %}
      <img src="{{ collection.products.first.featured_image | img_url }}" alt="{{ collection_title }}" />
      {% endif %}

      <div class="caption">
        <h2>{{ collection_title }}</h2>
        <p class="count">{{ collection.all_products_count }} {{ collection.all_products_count | pluralize: 'collections.general.product', 'collections.general.products' | t }}</p>
      </div>
    </a>
  </div>
</div>
